---
import type { APIContext } from 'astro';

import SubLayout from '../../layouts/SubLayout.astro';
import { GET, type HelloData } from '../api/hello.ts';

// https://docs.astro.build/en/recipes/call-endpoints/
// https://github.com/withastro/astro/issues/8514
// TODO ? fix that
const response = await GET(Astro as unknown as APIContext);
const data = (await (response as Response).json()) as HelloData;
---

<SubLayout title="Hello">{data.greeting}</SubLayout>
