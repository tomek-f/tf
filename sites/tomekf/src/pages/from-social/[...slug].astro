---
import type {
    GetStaticPaths,
    // InferGetStaticParamsType,
    InferGetStaticPropsType,
} from 'astro';

import posts from '../../from-social/posts.json';
import CommonLayout from '../../layouts/CommonLayout.astro';

export const getStaticPaths = (async () => {
    return posts.map((post) => ({
        params: { slug: post.image.split('/').pop()?.split('.').shift() }, // TODO ?
        props: { post },
    }));
}) satisfies GetStaticPaths;

// https://docs.astro.build/pl/guides/typescript/#infer-getstaticpaths-types
type Props = InferGetStaticPropsType<typeof getStaticPaths>;

const { post } = Astro.props;
---

<CommonLayout title={`${post.title} | From Social`}>
    <h2>{post.title}</h2>
    <p>{post.image}</p>
    <p>{post.creation_date}</p>
    <p>{post.creation_timestamp}</p>
    <p>{post.latitude}</p>
    <p>{post.longitude}</p>
</CommonLayout>
